<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/Etl.Net/blog/rss.xml" title="ETL.NET Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Etl.Net/blog/atom.xml" title="ETL.NET Blog Atom Feed"><title data-react-helmet="true">Execute, Track &amp; Check | ETL.NET</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://paillave.github.io//Etl.Net/img/SmallStreams.jpg"><meta data-react-helmet="true" name="twitter:image" content="https://paillave.github.io//Etl.Net/img/SmallStreams.jpg"><meta data-react-helmet="true" property="og:url" content="https://paillave.github.io//Etl.Net/docs/tutorials/trackAndCheck"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Execute, Track &amp; Check | ETL.NET"><meta data-react-helmet="true" name="description" content="TrackCheck"><meta data-react-helmet="true" property="og:description" content="TrackCheck"><link data-react-helmet="true" rel="shortcut icon" href="/Etl.Net/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://paillave.github.io//Etl.Net/docs/tutorials/trackAndCheck"><link data-react-helmet="true" rel="alternate" href="https://paillave.github.io//Etl.Net/docs/tutorials/trackAndCheck" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://paillave.github.io//Etl.Net/docs/tutorials/trackAndCheck" hreflang="x-default"><link rel="stylesheet" href="/Etl.Net/assets/css/styles.5001f6a5.css">
<link rel="preload" href="/Etl.Net/assets/js/runtime~main.f8f78b91.js" as="script">
<link rel="preload" href="/Etl.Net/assets/js/main.e65f942d.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Etl.Net/"><img src="/Etl.Net/img/logo.svg" alt="Etl.Net Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/Etl.Net/img/logo.svg" alt="Etl.Net Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">ETL.NET</b></a><a class="navbar__item navbar__link navbar__link--active" href="/Etl.Net/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/Etl.Net/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__search searchBarContainer_MM2z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_s5VG searchBarLoadingRing_2jQk"><div></div><div></div><div></div><div></div></div></div><a href="https://github.com/paillave/Etl.Net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Etl.Net/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Get Started</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Tutorial</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Etl.Net/docs/tutorials/backbone">Backbone</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Etl.Net/docs/tutorials/defineProcess">ETL process</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Etl.Net/docs/tutorials/trackAndCheck">Execute, Track &amp; Check</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Etl.Net/docs/tutorials/customOperator">Make a custom operator</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Patterns &amp; Recipes</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Operators</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Execute, Track &amp; Check</h1></header><p><img alt="TrackCheck" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iNjM2IiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDYzNiAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTMyMC4yMSAyNDEuOUMzNjkuOTgyIDI0MS45IDQxMC4zMyAyMDEuNTUyIDQxMC4zMyAxNTEuNzhDNDEwLjMzIDEwMi4wMDggMzY5Ljk4MiA2MS42NiAzMjAuMjEgNjEuNjZDMjcwLjQzOCA2MS42NiAyMzAuMDkgMTAyLjAwOCAyMzAuMDkgMTUxLjc4QzIzMC4wOSAyMDEuNTUyIDI3MC40MzggMjQxLjkgMzIwLjIxIDI0MS45WiIgZmlsbD0iIzNFOEVFRCIvPgogIDxwYXRoIGQ9Ik0xNTkuMzQgOTMuNzZDMTIzLjUzIDkzLjc2IDk0LjM5OTkgMTIyLjg5IDk0LjM5OTkgMTU4LjdDOTQuMzk5OSAxOTQuNTEgMTIzLjUzIDIyMy42NCAxNTkuMzQgMjIzLjY0QzE5NS4xNSAyMjMuNjQgMjI0LjI4IDE5NC41MSAyMjQuMjggMTU4LjdDMjI0LjI4IDEyMi45IDE5NS4xNSA5My43NiAxNTkuMzQgOTMuNzZaIiBmaWxsPSIjM0U4RUVEIi8+CiAgPHBhdGggZD0iTTQ4MS4xMyA5NC4xOEM0NDUuMzIgOTQuMTggNDE2LjE5IDEyMy4zMSA0MTYuMTkgMTU5LjEyQzQxNi4xOSAxOTQuOTMgNDQ1LjMyIDIyNC4wNiA0ODEuMTMgMjI0LjA2QzUxNi45NCAyMjQuMDYgNTQ2LjA3IDE5NC45MyA1NDYuMDcgMTU5LjEyQzU0Ni4wNyAxMjMuMzEgNTE2Ljk0IDk0LjE4IDQ4MS4xMyA5NC4xOFoiIGZpbGw9IiMzRThFRUQiLz4KICA8cGF0aCBkPSJNMjc2LjYyIDE2NC42QzI3NS40MyAxNjAuNTMgMjc0Ljc3IDE1Ni4yMyAyNzQuNzcgMTUxLjc4QzI3NC43NyAxMjYuNjggMjk1LjEyIDEwNi4zNCAzMjAuMjEgMTA2LjM0QzM0NS4zMSAxMDYuMzQgMzY1LjY1IDEyNi42OSAzNjUuNjUgMTUxLjc4QzM2NS42NSAxNTYuMTUgMzY1LjAyIDE2MC4zNiAzNjMuODcgMTY0LjM2TDM4NC4xNiAxNzAuODdDMzg1Ljk3IDE2NC44MiAzODYuOTUgMTU4LjQxIDM4Ni45NSAxNTEuNzhDMzg2Ljk1IDExNC45MiAzNTcuMDcgODUuMDQgMzIwLjIxIDg1LjA0QzI4My4zNSA4NS4wNCAyNTMuNDcgMTE0LjkyIDI1My40NyAxNTEuNzhDMjUzLjQ3IDE1OC40NCAyNTQuNDYgMTY0Ljg3IDI1Ni4yNyAxNzAuOTRMMjc2LjYyIDE2NC42WiIgZmlsbD0iI0QxQzVGNCIvPgogIDxwYXRoIGQ9Ik0zNjIuNTUgMTM1LjI3QzM2NC41NSAxNDAuMzkgMzY1LjY2IDE0NS45NSAzNjUuNjYgMTUxLjc4QzM2NS42NiAxNTYuMTUgMzY1LjAzIDE2MC4zNiAzNjMuODggMTY0LjM2TDM4NC4xNyAxNzAuODdDMzg1Ljk4IDE2NC44MiAzODYuOTYgMTU4LjQxIDM4Ni45NiAxNTEuNzhDMzg2Ljk2IDE0My4yMiAzODUuMzMgMTM1LjA1IDM4Mi40IDEyNy41M0wzNjIuNTUgMTM1LjI3WiIgZmlsbD0id2hpdGUiLz4KICA8cGF0aCBkPSJNMTI5LjU1IDE2Ny42OUMxMjguNzQgMTY0LjkxIDEyOC4yOSAxNjEuOTggMTI4LjI5IDE1OC45NEMxMjguMjkgMTQxLjgyIDE0Mi4xNyAxMjcuOTQgMTU5LjI5IDEyNy45NEMxNzYuNDEgMTI3Ljk0IDE5MC4yOSAxNDEuODIgMTkwLjI5IDE1OC45NEMxOTAuMjkgMTYxLjkyIDE4OS44NiAxNjQuNzkgMTg5LjA4IDE2Ny41MkwyMDIuOTIgMTcxLjk2QzIwNC4xNSAxNjcuODMgMjA0LjgyIDE2My40NiAyMDQuODIgMTU4LjkzQzIwNC44MiAxMzMuNzkgMTg0LjQ0IDExMy40IDE1OS4yOSAxMTMuNEMxMzQuMTUgMTEzLjQgMTEzLjc2IDEzMy43OCAxMTMuNzYgMTU4LjkzQzExMy43NiAxNjMuNDcgMTE0LjQzIDE2Ny44NiAxMTUuNjcgMTcyTDEyOS41NSAxNjcuNjlaIiBmaWxsPSJ3aGl0ZSIvPgogIDxwYXRoIGQ9Ik0xMzIuNDUgMTQzLjQ4TDEyMC4yMSAxMzUuNTlDMTE2LjEyIDE0Mi40MiAxMTMuNzYgMTUwLjQxIDExMy43NiAxNTguOTVDMTEzLjc2IDE2My40OSAxMTQuNDMgMTY3Ljg4IDExNS42NyAxNzIuMDJMMTI5LjU1IDE2Ny43QzEyOC43NCAxNjQuOTIgMTI4LjI5IDE2MS45OSAxMjguMjkgMTU4Ljk1QzEyOC4yOSAxNTMuMyAxMjkuODIgMTQ4LjAzIDEzMi40NSAxNDMuNDhaIiBmaWxsPSIjQTNDOUY2Ii8+CiAgPHBhdGggZD0iTTEyMi41MiAxNDcuMzdDMTIyLjUyIDE0Ny4zNyAxMzYuNTYgMTU2LjIxIDE1My4xNCAxNjYuMzdDMTU2LjU3IDE2OC42MyAxNjEuMjkgMTY5LjE4IDE2NC45MSAxNjYuNTlDMTY5LjM1IDE2My40MiAxNzAuMzYgMTU3LjIyIDE2Ny4xNiAxNTIuNzVDMTY1LjM1IDE1MC4yMiAxNjIuNiAxNDguNzkgMTU5LjczIDE0OC41OUMxNTkuNjMgMTQ4LjU3IDE1NS44NyAxNDguNDkgMTU1Ljc3IDE0OC40OUMxNTIuMjIgMTQ4LjQyIDEyMi41MiAxNDcuMzcgMTIyLjUyIDE0Ny4zN1oiIGZpbGw9IiMwMDY0REEiLz4KICA8cGF0aCBkPSJNMTYyLjczIDE1NS45MUMxNjEuMyAxNTMuOSAxNTguNTIgMTUzLjQzIDE1Ni41MyAxNTQuODZDMTU0LjU0IDE1Ni4yOCAxNTQuMDkgMTU5LjA2IDE1NS41MiAxNjEuMDdDMTU2Ljk1IDE2My4wOCAxNTkuNzMgMTYzLjU1IDE2MS43MiAxNjIuMTJDMTYzLjcxIDE2MC43IDE2NC4xNiAxNTcuOTIgMTYyLjczIDE1NS45MVoiIGZpbGw9IiMzRThFRUQiLz4KICA8cGF0aCBkPSJNNDUxLjMzIDE2Ny42OUM0NTAuNTEgMTY0LjkxIDQ1MC4wNyAxNjEuOTggNDUwLjA3IDE1OC45NEM0NTAuMDcgMTQxLjgyIDQ2My45NSAxMjcuOTQgNDgxLjA3IDEyNy45NEM0OTguMTkgMTI3Ljk0IDUxMi4wNyAxNDEuODIgNTEyLjA3IDE1OC45NEM1MTIuMDcgMTYxLjkyIDUxMS42NCAxNjQuNzkgNTEwLjg2IDE2Ny41Mkw1MjQuNyAxNzEuOTZDNTI1LjkzIDE2Ny44MyA1MjYuNiAxNjMuNDYgNTI2LjYgMTU4LjkzQzUyNi42IDEzMy43OSA1MDYuMjIgMTEzLjQgNDgxLjA3IDExMy40QzQ1NS45MyAxMTMuNCA0MzUuNTQgMTMzLjc4IDQzNS41NCAxNTguOTNDNDM1LjU0IDE2My40NyA0MzYuMjEgMTY3Ljg2IDQzNy40NSAxNzJMNDUxLjMzIDE2Ny42OVoiIGZpbGw9IndoaXRlIi8+CiAgPHBhdGggZD0iTTQ1NC4yMyAxNDMuNDhMNDQxLjk5IDEzNS41OUM0MzcuOSAxNDIuNDIgNDM1LjU0IDE1MC40MSA0MzUuNTQgMTU4Ljk1QzQzNS41NCAxNjMuNDkgNDM2LjIxIDE2Ny44OCA0MzcuNDUgMTcyLjAyTDQ1MS4zMyAxNjcuN0M0NTAuNTIgMTY0LjkyIDQ1MC4wNyAxNjEuOTkgNDUwLjA3IDE1OC45NUM0NTAuMDcgMTUzLjMgNDUxLjYgMTQ4LjAzIDQ1NC4yMyAxNDMuNDhaIiBmaWxsPSIjQTNDOUY2Ii8+CiAgPHBhdGggZD0iTTQ0NC4xNiAxNDcuMzVDNDQ0LjE2IDE0Ny4zNSA0NjAuMDMgMTU2LjU0IDQ3NC45MiAxNjYuMzdDNDc4LjI5IDE2OC45NiA0ODMuMDcgMTY5LjE4IDQ4Ni42OSAxNjYuNTlDNDkxLjEzIDE2My40MiA0OTIuMTQgMTU3LjIyIDQ4OC45NCAxNTIuNzVDNDg3LjEzIDE1MC4yMiA0ODQuMzggMTQ4Ljc5IDQ4MS41MSAxNDguNTlDNDgxLjQxIDE0OC41NyA0ODEuMzIgMTQ4LjU1IDQ4MS4yMSAxNDguNTVDNDc3LjY2IDE0OC40NyA0NDQuMTYgMTQ3LjM1IDQ0NC4xNiAxNDcuMzVaIiBmaWxsPSIjMDA2NERBIi8+CiAgPHBhdGggZD0iTTQ4NC41MSAxNTUuOTFDNDgzLjA4IDE1My45IDQ4MC4zIDE1My40MyA0NzguMzEgMTU0Ljg2QzQ3Ni4zMiAxNTYuMjggNDc1Ljg3IDE1OS4wNiA0NzcuMyAxNjEuMDdDNDc4LjczIDE2My4wOCA0ODEuNTEgMTYzLjU1IDQ4My41IDE2Mi4xMkM0ODUuNDkgMTYwLjcgNDg1Ljk0IDE1Ny45MiA0ODQuNTEgMTU1LjkxWiIgZmlsbD0iIzNFOEVFRCIvPgogIDxwYXRoIGQ9Ik0zNjUuMzcgMTE1LjQ4QzM2NS4zNyAxMTUuNDggMzQyLjg4IDEyNC44OCAzMTUuNjggMTM2LjE5QzMwOS41NiAxMzguMDYgMzA1LjExIDE0My43MSAzMDUuMTEgMTUwLjRDMzA1LjExIDE1OC42MSAzMTEuODEgMTY1LjI3IDMyMC4wOCAxNjUuMjdDMzI0Ljc2IDE2NS4yNyAzMjguOTIgMTYzLjE1IDMzMS42OCAxNTkuODFDMzMxLjc5IDE1OS43IDMzMS45IDE1OS42MSAzMzEuOTkgMTU5LjQ4QzM0NC4xMSAxNDUuMzIgMzY1LjM3IDExNS40OCAzNjUuMzcgMTE1LjQ4WiIgZmlsbD0iIzUyMkNENSIvPgogIDxwYXRoIGQ9Ik0zMjAuMDkgMTU3LjA4QzMyMy44IDE1Ny4wOCAzMjYuODEgMTU0LjA5IDMyNi44MSAxNTAuNDFDMzI2LjgxIDE0Ni43MiAzMjMuOCAxNDMuNzQgMzIwLjA5IDE0My43NEMzMTYuMzggMTQzLjc0IDMxMy4zNyAxNDYuNzMgMzEzLjM3IDE1MC40MUMzMTMuMzcgMTU0LjA5IDMxNi4zOCAxNTcuMDggMzIwLjA5IDE1Ny4wOFoiIGZpbGw9IiM5NTdFRTYiLz4KPC9zdmc+"></p><p>ETL.NET can show what will happen, what happens, and what happened under the hood in details.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="get-the-estimated-execution-plan"></a>Get the estimated execution plan<a class="hash-link" href="#get-the-estimated-execution-plan" title="Direct link to heading">#</a></h2><p>We will get the estimated execution plan with <code>GetDefinitionStructure</code> method of the runner:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">var processRunner = StreamProcessRunner.Create&lt;string&gt;(DefineProcess);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">var structure = processRunner.GetDefinitionStructure();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The method will return the list of nodes that are composing the ETL process, and all the links between them.</p><p>For each node, an information regarding to possible performance and memory impact is given: <code>1</code> = low and <code>3</code> = heavy</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;StreamToNodeLinks&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;InputName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Stream&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TargetNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;extract files from zip&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;list all required files&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;InputName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Stream&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TargetNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;parse file&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;extract files from zip&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;InputName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;InputStream&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TargetNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;exclude duplicates based on the Email&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;parse file&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;InputName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SourceStream&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TargetNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;upsert using Email as key and ignore the Id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;exclude duplicates based on the Email&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;InputName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Stream&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TargetNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;define row to report&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;upsert using Email as key and ignore the Id&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;InputName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MainStream&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TargetNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;write summary to file&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;define row to report&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;InputName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Stream&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TargetNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;save log file&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;write summary to file&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;Nodes&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;NodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;-ProcessRunner-&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TypeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;-ProcessRunner-&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;PerformanceImpact&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;MemoryFootPrint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;IsRootNode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;NodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;list all required files&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TypeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Cross apply FileSystemValuesProvider`2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;PerformanceImpact&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;MemoryFootPrint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;IsRootNode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;NodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;extract files from zip&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TypeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Cross apply UnzipFileProcessorValuesProvider&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;PerformanceImpact&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;MemoryFootPrint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;IsRootNode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;NodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;parse file&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TypeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Cross apply FlatFileValuesProvider`2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;PerformanceImpact&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;MemoryFootPrint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;IsRootNode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;NodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;exclude duplicates based on the Email&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TypeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Distinct&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;PerformanceImpact&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;MemoryFootPrint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;IsRootNode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;NodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;upsert using Email as key and ignore the Id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TypeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SqlServerSave&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;PerformanceImpact&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;MemoryFootPrint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;IsRootNode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;NodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;define row to report&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TypeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Select&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;PerformanceImpact&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;MemoryFootPrint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;IsRootNode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;NodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;write summary to file&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TypeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ToFileValue&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;PerformanceImpact&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;MemoryFootPrint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;IsRootNode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;NodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;save log file&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;TypeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;WriteToFile&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;PerformanceImpact&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;MemoryFootPrint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;IsRootNode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;PerformanceImpact&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;MemoryFootPrint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It is possible to visualize it with a sankey diagram (by default, will work only if a debugger is attached to the current process):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">var processRunner = StreamProcessRunner.Create&lt;string&gt;(DefineProcess);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">var structure = processRunner.GetDefinitionStructure();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">structure.OpenEstimatedExecutionPlan();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The diagram will be shown in the web browser:</p><p><img alt="estimatedExPlan" src="/Etl.Net/assets/images/estimatedExPlan-e1bbdf021eb7011635825d822e49f928.png"></p><p>The chart looks pretty simple and straight forward, but it can be very useful when lot of nodes are interacting.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="check-the-result"></a>Check the result<a class="hash-link" href="#check-the-result" title="Direct link to heading">#</a></h2><p>Once a ETL process has completed, we can get more details than its success or failure. Getting the amount of rows issued by each node can be very useful.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">var res = await processRunner.ExecuteAsync(args[0], executionOptions);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Console.Write(res.Failed ? &quot;Failed&quot; : &quot;Succeeded&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">var counters = res.StreamStatisticCounters;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">var estimatedExecutionPlan = res.JobDefinitionStructure;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>estimatedExecutionPlan</code> will be exactly the same than <code>processRunner.GetDefinitionStructure()</code>.</p><p><code>counters</code> will contain the following:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;Counter&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;-ProcessRunner-&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;Counter&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;list all required files&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;Counter&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;extract files from zip&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;Counter&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">45</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;parse file&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;Counter&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">45</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;exclude duplicates based on the Email&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;Counter&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">45</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;upsert using Email as key and ignore the Id&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;Counter&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">45</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;define row to report&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;Counter&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;write summary to file&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;Counter&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;SourceNodeName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;save log file&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It is also possible to show the Sankey diagram with ribbons that have the width depending on the count of rows that were issued by the originating node:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">var res = await processRunner.ExecuteAsync(args[0], executionOptions);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Console.Write(res.Failed ? &quot;Failed&quot; : &quot;Succeeded&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">res.OpenActualExecutionPlan();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The diagram will be shown in the web browser:</p><p><img alt="actualExecutionPlan" src="/Etl.Net/assets/images/actualExecutionPlan-766ca19efb5492122de040f64d1f337b.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="get-the-error-if-it-occurs"></a>Get the error if it occurs<a class="hash-link" href="#get-the-error-if-it-occurs" title="Direct link to heading">#</a></h2><p>When an error occurred during the execution process (<code>ExecutionStatus.Failed</code> return by method <code>ExecuteAsync</code>) the property <code>ExecutionStatus.ErrorTraceEvent</code> informs where and what happened:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">if (res.Failed)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Console.Write($&quot;{res.ErrorTraceEvent.NodeName}({res.ErrorTraceEvent.NodeTypeName}):{res.ErrorTraceEvent.Content.Message}&quot;);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="trace-everything-that-goes-through-nodes"></a>Trace everything that goes through nodes<a class="hash-link" href="#trace-everything-that-goes-through-nodes" title="Direct link to heading">#</a></h2><p>Before triggering the execution of the ETL process listen the event <code>DebugNodeStream</code> of the process runner.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">var processRunner = StreamProcessRunner.Create&lt;string&gt;(DefineProcess);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">processRunner.DebugNodeStream += (sender, e) =&gt; { };</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The event args <code>e</code> contains a chunk of values (max 1000 values per chunks) in the property <code>TraceContents</code>, and the name of the node that emitted it in the property <code>NodeName</code>.</p><p>Placing a breakpoint in the event handler permits to see all the values that are processes within the ETL. Applying the following condition on the breakpoint will show only chunks of data issued by the node that parses csv files:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">e.NodeName == &quot;parse file&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><img alt="trackValues" src="/Etl.Net/assets/images/trackValues-e9d49f8dd10adc86ecaef50ede09152a.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="catch-main-events-to-save-them-in-a-log-file"></a>Catch main events to save them in a log file<a class="hash-link" href="#catch-main-events-to-save-them-in-a-log-file" title="Direct link to heading">#</a></h2><p>We will track each end of nodes, raised errors and save it in a log file in the current directory.</p><p>For this, we must make an ETL process dedicated to handle traces:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">private static void DefineTraceProcess(IStream&lt;TraceEvent&gt; traceStream, ISingleStream&lt;string&gt; contentStream)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    traceStream</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .Where(&quot;keep only summary of node and errors&quot;, i =&gt; i.Content is CounterSummaryStreamTraceContent || i.Content is UnhandledExceptionStreamTraceContent)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .Select(&quot;create log entry&quot;, i =&gt; new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            DateTime = DateTime.Now,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Type = i.Content switch</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                CounterSummaryStreamTraceContent =&gt; &quot;EndOfNode&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                UnhandledExceptionStreamTraceContent =&gt; &quot;Error&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                _ =&gt; &quot;Unknown&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Message = i.Content switch</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                CounterSummaryStreamTraceContent counterSummary =&gt; $&quot;{i.NodeName}: {counterSummary.Counter}&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                UnhandledExceptionStreamTraceContent unhandledException =&gt; $&quot;{i.NodeName}({unhandledException.Type}): [{unhandledException.Level.ToString()}] {unhandledException.Message}&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                _ =&gt; &quot;Unknown&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        })</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .ToTextFileValue(&quot;write log file&quot;, &quot;log.csv&quot;, FlatFileDefinition.Create(i =&gt; new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            DateTime = i.ToDateColumn(&quot;datetime&quot;, &quot;yyyy-MM-dd hh:mm:ss:ffff&quot;),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Type = i.ToColumn(&quot;event type&quot;),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Message = i.ToColumn(&quot;details&quot;),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }).IsColumnSeparated(&#x27;,&#x27;))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .WriteToFile(&quot;save log file&quot;, i =&gt; i.Name);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Then we must provide this specific ETL process when executing the process by setting it in <code>ExecutionOptions</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">var executionOptions = new ExecutionOptions&lt;string&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Resolver = new SimpleDependencyResolver().Register(cnx),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    TraceProcessDefinition = DefineTraceProcess</span></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The output file will contain the following:</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">log.csv</div><div class="codeBlockContent_hGly csv"><pre tabindex="0" class="prism-code language-csv codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">datetime,event type,details</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-07-15 12:26:39:7094,EndOfNode,-ProcessRunner-: 1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-07-15 12:26:39:7425,EndOfNode,list all required files: 2</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-07-15 12:26:39:8204,EndOfNode,extract files from zip: 9</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-07-15 12:26:40:2900,EndOfNode,parse file: 45</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-07-15 12:26:40:2900,EndOfNode,exclude duplicates: 45</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-07-15 12:26:40:2901,EndOfNode,save in DB: 45</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-07-15 12:26:40:2901,EndOfNode,display ids on console: 45</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>If, for some reasons, actual values that are being issued by some nodes are needed to be accessed, <code>UseDetailedTraces</code> must be flagged in options that are transmitted to <code>ExecuteAsync</code>. To catch the content, <code>RowProcessStreamTraceContent</code> must be included in the trace ETL process.</p><p><code>UseDetailedTraces</code>  is set to <code>false</code> by default for performance purposes.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">var executionOptions = new ExecutionOptions&lt;string&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Resolver = new SimpleDependencyResolver().Register(cnx),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    TraceProcessDefinition = DefineTraceProcess,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    UseDetailedTraces = true</span></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="full-source-code-at-this-stage"></a>Full source code at this stage<a class="hash-link" href="#full-source-code-at-this-stage" title="Direct link to heading">#</a></h2><p>This piece of program is a typical process to make a reliable upsert of the content of every zipped csv file in a folder, with process summary and error logging... Ready to deploy in production! ðŸ¾ ðŸº ðŸ¸ ðŸ¥‚ ðŸ»</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">Program.cs</div><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">using System;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Threading.Tasks;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using Paillave.Etl.Core;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using Paillave.Etl.FileSystem;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using Paillave.Etl.Zip;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using Paillave.Etl.TextFile;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using Paillave.Etl.SqlServer;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Data.SqlClient;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace SimpleTutorial</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    class Program</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        static async Task Main(string[] args)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var processRunner = StreamProcessRunner.Create&lt;string&gt;(DefineProcess);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            processRunner.DebugNodeStream += (sender, e) =&gt; { };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            using (var cnx = new SqlConnection(args[1]))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                cnx.Open();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                var executionOptions = new ExecutionOptions&lt;string&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Resolver = new SimpleDependencyResolver().Register(cnx),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    TraceProcessDefinition = DefineTraceProcess</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                var res = await processRunner.ExecuteAsync(args[0], executionOptions);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                Console.Write(res.Failed ? &quot;Failed&quot; : &quot;Succeeded&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (res.Failed)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Console.Write($&quot;{res.ErrorTraceEvent.NodeName}({res.ErrorTraceEvent.NodeTypeName}):{res.ErrorTraceEvent.Content.Message}&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private class Person</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            public int Id { get; set; }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            public string Email { get; set; }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            public string FirstName { get; set; }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            public string LastName { get; set; }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            public DateTime DateOfBirth { get; set; }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            public int? Reputation { get; set; }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private static void DefineProcess(ISingleStream&lt;string&gt; contextStream)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            contextStream</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .CrossApplyFolderFiles(&quot;list all required files&quot;, &quot;*.zip&quot;, true)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .CrossApplyZipFiles(&quot;extract files from zip&quot;, &quot;*.csv&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .CrossApplyTextFile(&quot;parse file&quot;, </span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    FlatFileDefinition.Create(i =&gt; new Person</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Email = i.ToColumn(&quot;email&quot;),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        FirstName = i.ToColumn(&quot;first name&quot;),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        LastName = i.ToColumn(&quot;last name&quot;),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        DateOfBirth = i.ToDateColumn(&quot;date of birth&quot;, &quot;yyyy-MM-dd&quot;),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Reputation = i.ToNumberColumn&lt;int?&gt;(&quot;reputation&quot;, &quot;.&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }).IsColumnSeparated(&#x27;,&#x27;))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .Distinct(&quot;exclude duplicates based on the Email&quot;, i =&gt; i.Email)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .SqlServerSave(&quot;upsert using Email as key and ignore the Id&quot;, o =&gt; o</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .ToTable(&quot;dbo.Person&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .SeekOn(p =&gt; p.Email)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .DoNotSave(p =&gt; p.Id))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .Select(&quot;define row to report&quot;, i =&gt; new { i.Email, i.Id })</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .ToTextFileValue(&quot;write summary to file&quot;, </span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;report.csv&quot;, </span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    FlatFileDefinition.Create(i =&gt; new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Email = i.ToColumn(&quot;Email&quot;),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Id = i.ToNumberColumn&lt;int&gt;(&quot;new or existing Id&quot;, &quot;.&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }).IsColumnSeparated(&#x27;,&#x27;))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .WriteToFile(&quot;save log file&quot;, i =&gt; i.Name);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private static void DefineTraceProcess(IStream&lt;TraceEvent&gt; traceStream, ISingleStream&lt;string&gt; contentStream)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            traceStream</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .Where(&quot;keep only summary of node and errors&quot;, i =&gt; i.Content is CounterSummaryStreamTraceContent || i.Content is UnhandledExceptionStreamTraceContent)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .Select(&quot;create log entry&quot;, i =&gt; new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    DateTime = DateTime.Now,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Type = i.Content switch</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        CounterSummaryStreamTraceContent =&gt; &quot;EndOfNode&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        UnhandledExceptionStreamTraceContent =&gt; &quot;Error&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        _ =&gt; &quot;Unknown&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Message = i.Content switch</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        CounterSummaryStreamTraceContent counterSummary =&gt; $&quot;{i.NodeName}: {counterSummary.Counter}&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        UnhandledExceptionStreamTraceContent unhandledException =&gt; $&quot;{i.NodeName}({i.NodeTypeName}): [{unhandledException.Level.ToString()}] {unhandledException.Message}&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        _ =&gt; &quot;Unknown&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                })</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .ToTextFileValue(&quot;write log file&quot;, &quot;log.csv&quot;, FlatFileDefinition.Create(i =&gt; new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    DateTime = i.ToDateColumn(&quot;datetime&quot;, &quot;yyyy-MM-dd hh:mm:ss:ffff&quot;),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Type = i.ToColumn(&quot;event type&quot;),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Message = i.ToColumn(&quot;details&quot;),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                }).IsColumnSeparated(&#x27;,&#x27;))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .WriteToFile(&quot;save log file&quot;, i =&gt; i.Name);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://paillave.github.io/Etl.Net/edit/master/website/docs/tutorials/3-trackAndCheck.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Etl.Net/docs/tutorials/defineProcess"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« ETL process</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Etl.Net/docs/tutorials/customOperator"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Make a custom operator Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#get-the-estimated-execution-plan" class="table-of-contents__link">Get the estimated execution plan</a></li><li><a href="#check-the-result" class="table-of-contents__link">Check the result</a></li><li><a href="#get-the-error-if-it-occurs" class="table-of-contents__link">Get the error if it occurs</a></li><li><a href="#trace-everything-that-goes-through-nodes" class="table-of-contents__link">Trace everything that goes through nodes</a></li><li><a href="#catch-main-events-to-save-them-in-a-log-file" class="table-of-contents__link">Catch main events to save them in a log file</a></li><li><a href="#full-source-code-at-this-stage" class="table-of-contents__link">Full source code at this stage</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Paillave.</div></div></div></footer></div>
<script src="/Etl.Net/assets/js/runtime~main.f8f78b91.js"></script>
<script src="/Etl.Net/assets/js/main.e65f942d.js"></script>
</body>
</html>